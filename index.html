<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Horário Espiritual</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:url("https://images.unsplash.com/photo-1444703686981-a3abbc4d4fe3")
             center/cover no-repeat fixed;
}

.header{
  background:rgba(255,255,255,0.75);
  padding:10px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}

.top-controls{
  background:rgba(255,255,255,0.85);
  margin:10px 15px;
  padding:8px;
  border-radius:6px;
  text-align:center;
}

.top-controls select{
  padding:4px;
  margin:0 5px;
}

.container{
  background:rgba(255,255,255,0.85);
  margin:15px;
  padding:10px;
  border-radius:6px;
  overflow-x:auto;
}

table{
  width:max-content;
  border-collapse:collapse;
}

th,td{
  border:1px solid #999;
  padding:3px;
  font-size:12px;
  text-align:center;
}

th{ background:#eee; }

.categoria{
  background:#ddd;
  font-weight:bold;
  text-align:left;
  padding-left:8px;
}

.acao-input{
  width:90%;
  border:none;
  background:transparent;
  font-weight:bold;
}

.btn{
  cursor:pointer;
  font-weight:bold;
  margin-left:6px;
}

.btn.add{ color:#3b5cff; }
.btn.del{ color:#e53935; }

.dia{
  width:24px;
  height:24px;
  cursor:pointer;
  background:#f0f0f0;
}

.verde{ background:#4CAF50; }
.amarelo{ background:#FFC107; }
.vermelho{ background:#F44336; }

/* modal simples */
.modal{
  position:fixed;
  top:0; left:0;
  width:100%; height:100%;
  background:rgba(0,0,0,0.4);
  display:none;
  align-items:center;
  justify-content:center;
}

.modal-box{
  background:#fff;
  padding:15px;
  border-radius:6px;
  text-align:center;
}

.modal-box button{
  margin:5px;
  padding:6px 10px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="header">HORÁRIO ESPIRITUAL</div>

<div class="top-controls">
  Mês:
  <select id="mes">
    <option>Janeiro</option><option>Fevereiro</option><option>Março</option>
    <option>Abril</option><option>Maio</option><option>Junho</option>
    <option>Julho</option><option>Agosto</option><option>Setembro</option>
    <option>Outubro</option><option>Novembro</option><option>Dezembro</option>
  </select>

  Ano:
  <select id="ano"></select>
</div>

<div class="container">
<table>

<thead>
<tr>
  <th>AÇÃO</th>
  <script>
    for(let i=1;i<=31;i++) document.write("<th>"+i+"</th>");
  </script>
</tr>
</thead>

<tbody>

<script>
const categorias = [
  "Vinculação comigo mesmo",
  "Vinculação com Deus",
  "Vinculação com os outros",
  "Vinculação com o trabalho"
];

categorias.forEach(nome=>{
  document.write(`
    <tr>
      <td class="categoria" colspan="32">
        ${nome}
        <span class="btn add" onclick="addAcao(this)">+</span>
      </td>
    </tr>
  `);

  for(let a=0;a<3;a++){
    document.write("<tr class='acao-row'>");
    document.write(`
      <td>
        <input class="acao-input" placeholder="Digite a ação do mês">
        <span class="btn del" onclick="removeAcao(this)">✖</span>
      </td>
    `);
    for(let i=1;i<=31;i++){
      document.write("<td class='dia'></td>");
    }
    document.write("</tr>");
  }
});
</script>

</tbody>
</table>
</div>

<!-- MODAL STATUS -->
<div class="modal" id="modal">
  <div class="modal-box">
    <p>Escolha o status do dia</p>
    <button onclick="setStatus('verde')" style="background:#4CAF50">Verde</button>
    <button onclick="setStatus('amarelo')" style="background:#FFC107">Amarelo</button>
    <button onclick="setStatus('vermelho')" style="background:#F44336">Vermelho</button>
    <button onclick="setStatus('')">Limpar</button>
  </div>
</div>

<script>
const estados = ["verde","amarelo","vermelho"];
let celulaAtual = null;

/* ano dinâmico */
const anoSel = document.getElementById("ano");
const anoAtual = new Date().getFullYear();
for(let a=anoAtual-2;a<=anoAtual+5;a++){
  anoSel.innerHTML += `<option>${a}</option>`;
}

/* clique no dia */
document.querySelectorAll(".dia").forEach(c=>{
  c.onclick = ()=>{
    celulaAtual = c;
    document.getElementById("modal").style.display="flex";
  };
});

function setStatus(status){
  celulaAtual.className = "dia " + status;
  document.getElementById("modal").style.display="none";
}

/* aplicar clique ao adicionar ações */
function aplicarClique(linha){
  linha.querySelectorAll(".dia").forEach(c=>{
    c.onclick = ()=>{
      celulaAtual = c;
      document.getElementById("modal").style.display="flex";
    };
  });
}

function addAcao(btn){
  const cat = btn.closest("tr");
  const nova = document.createElement("tr");
  nova.className = "acao-row";

  let html = `
    <td>
      <input class="acao-input" placeholder="Digite a ação do mês">
      <span class="btn del" onclick="removeAcao(this)">✖</span>
    </td>
  `;

  for(let i=1;i<=31;i++) html += `<td class="dia"></td>`;
  nova.innerHTML = html;
  cat.after(nova);
  aplicarClique(nova);
}

function removeAcao(btn){
  btn.closest("tr").remove();
}
</script>

</body>
</html>
